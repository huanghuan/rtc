<html>
<head>
<meta charset='UTF-8'>
<script src="https://simplewebrtc.com/latest-v2.js"></script>
<script src='https://cdn.bootcss.com/zepto/1.2.0/zepto.min.js'></script>
<style>
body {
	margin: 0;
}
aside {
	position: fixed;
	right: 0;
	top: 0;
	width: 160px;
	margin: 20px;
}
aside video {
	width: 160px;
	height: 120px;
	object-fit: contain;
}
#remote>video:last-child {
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	z-index: -100;
	object-fit: cover;
}
</style>
</head>
<body>
<aside>
<video id='local'></video>
<button id='leaveRoom'>离开会议</button>
<button id='shareScreen'>分享屏幕</button>
<button id='stopScreenShare'>停止分享</button>
<div id='remote'></div>
</aside>
<script>
var handlers = {
	leaveRoom: function() {
		rtc.leaveRoom();
	},
	shareScreen: function() {
		rtc.shareScreen();
	},
	stopScreenShare: function() {
		if (rtc.getLocalScreen()) rtc.stopScreenShare();
	}
};
var rtc = new SimpleWebRTC({
	localVideoEl: 'local',
	remoteVideosEl: 'remote',
	autoRequestMedia: true
});
rtc.on('readyToCall', function() {
	rtc.joinRoom('test');
}).on('localScreenAdded', function(video) {
	$('#local').append($(video));
}).on('localScreenRemoved', function(video) {
	$(video).remove();
});
$(document).on('click', 'button', function(e) {
	handlers[e.target.id]();
});
</script>
</body>
</html>
